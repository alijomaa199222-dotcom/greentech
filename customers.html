<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Customers Page</title>

<style>
body{
    font-family: Arial;
    margin:0;
    background:#f2f2f2;
}
header{background:green;color:white;padding:20px;text-align:center;font-size:22px;}
.nav{
    display:flex;
    justify-content:space-around;
    background:white;
    padding:12px;
    box-shadow:0 2px 6px rgba(0,0,0,0.15);
}
.nav a{
    text-decoration:none;
    font-weight:bold;
    color:#1e5aa8;
}
.container{
    padding:15px;
}
input, textarea{
    width:100%;
    padding:10px;
    margin:6px 0;
    border:1px solid #ccc;
    border-radius:8px;
}
textarea{
    resize:none;
    height:60px;
}
button{
    padding:10px 14px;
    border:none;
    border-radius:8px;
    cursor:pointer;
    font-weight:bold;
}
.addBtn{
    background:green;
    color:white;
    width:100%;
}
.editBtn{
    background:blue;
    color:white;
}
.removeBtn{
    background:red;
    color:white;
}
table{
    width:100%;
    border-collapse:collapse;
    margin-top:15px;
    background:white;
}
th,td{
    padding:10px;
    border:1px solid #ddd;
    text-align:center;
}
#h2{text-align: center;}
</style>
</head>

<body>

<header>
    <img id="header" src="green-lion.png" alt="green tech" width="80px" height="80px">
</header>
<h2>ğŸ‘¥ Customers System</h2>
<nav class="nav">
  <a href="index.html">ğŸ“¦ Stock</a>
  <a href="sales.html">ğŸ’° Sales</a>
  <a href="history.html">ğŸ“Š History</a>
  <a href="dealers.html">ğŸ“’ Dealers</a>
  <a href="dealers-history.html">ğŸ“œ Payments</a>
  <a href="customers.html">ğŸ‘¥ Customers</a>
</nav>

<div class="container">

<h3>â• Add Customer</h3>

<input type="text" id="custName" placeholder="Customer Name">
<input type="text" id="custPhone" placeholder="Customer Phone">
<textarea id="custNotes" placeholder="Notes (ex: likes perfumes, special discount...)"></textarea>

<button class="addBtn" onclick="addCustomer()">Add Customer</button>

<h3>ğŸ” Search Customer</h3>
<input type="text" id="search" placeholder="Search by name or phone..." onkeyup="renderCustomers()">

<table>
<thead>
<tr>
<th>Name</th>
<th>Phone</th>
<th>Notes</th>
<th>Last Visit</th>
<th>Edit</th>
<th>Remove</th>
</tr>
</thead>
<tbody id="custTable"></tbody>
</table>

</div>

<script>
let customers = JSON.parse(localStorage.getItem("customers")) || [];

/* Save */
function saveCustomers(){
    localStorage.setItem("customers", JSON.stringify(customers));
}

/* Add Customer */
function addCustomer(){
    let name = document.getElementById("custName").value;
    let phone = document.getElementById("custPhone").value;
    let notes = document.getElementById("custNotes").value;

    if(name===""){
        alert("Enter customer name!");
        return;
    }

    customers.push({
        name:name,
        phone:phone,
        notes:notes,
        lastVisit:new Date().toLocaleDateString()
    });

    saveCustomers();
    renderCustomers();

    document.getElementById("custName").value="";
    document.getElementById("custPhone").value="";
    document.getElementById("custNotes").value="";
}

/* Render Customers */
function renderCustomers(){
    let search = document.getElementById("search").value.toLowerCase();
    let table="";

    customers
    .filter(c =>
        c.name.toLowerCase().includes(search) ||
        c.phone.toLowerCase().includes(search)
    )
    .forEach((c,i)=>{

        table += `
        <tr>
          <td>${c.name}</td>
          <td>${c.phone}</td>
          <td>${c.notes}</td>
          <td>${c.lastVisit}</td>

          <td><button class="editBtn" onclick="editCustomer(${i})">Edit</button></td>
          <td><button class="removeBtn" onclick="removeCustomer(${i})">X</button></td>
        </tr>`;
    });

    document.getElementById("custTable").innerHTML=table;
}

/* Remove */
function removeCustomer(i){
    if(confirm("Remove this customer?")){
        customers.splice(i,1);
        saveCustomers();
        renderCustomers();
    }
}

/* Edit */
function editCustomer(i){
    let c = customers[i];

    let newName = prompt("Edit Name:", c.name);
    if(newName===null) return;

    let newPhone = prompt("Edit Phone:", c.phone);
    if(newPhone===null) return;

    let newNotes = prompt("Edit Notes:", c.notes);
    if(newNotes===null) return;

    c.name=newName;
    c.phone=newPhone;
    c.notes=newNotes;
    c.lastVisit=new Date().toLocaleDateString();

    saveCustomers();
    renderCustomers();
}

renderCustomers();
</script>

</body>
</html>